(()=>{let e=[],t={};(async function(){let t=await fetch("data/city.list.json"),n=await t.json();e=n.map((e=>({name:e.name,country:e.country,id:e.id})))})().then((n=>{!function(e,n){var a;function i(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),a>=e.length&&(a=0),a<0&&(a=e.length-1),e[a].classList.add("autocomplete-active")}function d(t){for(var n=document.getElementsByClassName("autocomplete-items"),a=0;a<n.length;a++)t!=n[a]&&t!=e&&n[a].parentNode.removeChild(n[a])}e.addEventListener("input",(function(i){d(),t={};var o=this.value;if(!o)return!1;a=-1;var c=document.createElement("div");c.setAttribute("id",this.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(c);for(var l=0,r=0;r<n.length;r++)if(n[r].name.substr(0,o.length).toUpperCase()==o.toUpperCase()&&l<10){var s=document.createElement("div");s.innerHTML="<strong>"+n[r].name.substr(0,o.length)+"</strong>",s.innerHTML+=n[r].name.substr(o.length)+", "+n[r].country,s.innerHTML+="<input type='hidden' value='"+n[r].name+"'>",s.innerHTML+="<input type='hidden' value='"+n[r].country+"'>",s.innerHTML+="<input type='hidden' value='"+n[r].id+"'>",s.addEventListener("click",(function(n){e.value=this.getElementsByTagName("input")[0].value;let a=this.getElementsByTagName("input")[1].value,i=this.getElementsByTagName("input")[2].value;t={location:e.value,country:a,id:i},d()})),c.appendChild(s),l++}})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(a++,i(t)):38==e.keyCode?(a--,i(t)):13==e.keyCode&&(e.preventDefault(),a>-1&&t&&t[a].click())})),document.addEventListener("click",(function(e){d(e.target)}))}(document.getElementById("location"),e)})),document.getElementById("search").addEventListener("submit",(n=>{n.preventDefault();let a=document.getElementById("location");cityId=t.id||function(t){let n=e.find((e=>e.name.toUpperCase()==t.toUpperCase()));return n?n.id:-1}(a.value),async function(e){const t=await fetch(`http://api.openweathermap.org/data/2.5/weather?id=${e}&appid=31aacefbb663efad6c58dd73c8163725&units=metric`),n=document.querySelector(".result-box");n.innerHTML="";let a="",i="",d="",o="",c="";if(-1==e){const e=document.createElement("div");e.classList.add("result-card");const t=document.createElement("h1");return t.textContent="City not found",e.appendChild(t),void n.appendChild(e)}a=await t.json(),i=a.name,d=a.sys.country,o=Math.floor(a.main.temp),c=a.weather[0].icon;const l=document.createElement("div");l.classList.add("result-card");const r=document.createElement("h1");r.textContent=`${i}, ${d}`;const s=document.createElement("div");s.classList.add("temperature");const u=document.createElement("span");u.textContent=`${o}Â°C`;const m=document.createElement("img");m.src=`https://openweathermap.org/img/wn/${c}@2x.png`,s.appendChild(u),s.appendChild(m),l.appendChild(r),l.appendChild(s),n.appendChild(l)}(cityId),a.value="",t={}}))})();